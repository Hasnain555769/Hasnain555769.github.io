<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grammar + Tense Checker</title>
  <style>
    :root {
      --bg: #0b1220;      /* adjust to match your site's theme */
      --card: #111a2b;
      --accent: #3b82f6;  /* blue */
      --ok: #22c55e;      /* green */
      --warn: #f59e0b;    /* amber */
      --bad: #ef4444;     /* red */
      --text: #e5e7eb;    /* light */
      --muted: #94a3b8;   /* slate-400 */
      --chip: #1f2a44;
    }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif; background: linear-gradient(180deg,#1e3a8a,#3b82f6,#7c3aed); color: var(--text); margin: 0; padding: 24px; }
    .wrap { max-width: 900px; margin: 0 auto; display: grid; gap: 16px; }
    h1 { font-size: 26px; margin: 0 0 8px; }
    p { color: var(--muted); margin: 0 0 12px; }
    .card { background: var(--card); border: 1px solid #1f2937; border-radius: 16px; padding: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    textarea { width: 100%; min-height: 130px; resize: vertical; padding: 12px; border-radius: 12px; border: 1px solid #1f2937; background: #0f1628; color: var(--text); outline: none; font-size: 15px; line-height: 1.5; }
    .row { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-top: 10px; }
    button { background: var(--accent); color: white; border: none; padding: 10px 16px; border-radius: 999px; font-weight: 600; cursor: pointer; transition: .2s; }
    button:hover { filter: brightness(1.1); transform: translateY(-1px); }
    .ghost { background: transparent; border: 1px solid #23314a; color: var(--text); }
    .status { font-weight: 700; }
    .ok { color: var(--ok); }
    .bad { color: var(--bad); }
    .warn { color: var(--warn); }
    .grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 900px) { .grid { grid-template-columns: 1.2fr .8fr; } }
    .section-title { font-size: 14px; text-transform: uppercase; letter-spacing: .08em; color: var(--muted); margin-bottom: 6px; }
    .list, .syn-list { display: grid; gap: 8px; }
    .issue { background: #0f1628; border: 1px dashed #29344d; padding: 10px 12px; border-radius: 12px; }
    .issue b { color: #fff; }
    .chips { display: flex; gap: 8px; flex-wrap: wrap; }
    .chip { background: var(--chip); border: 1px solid #23314a; padding: 6px 10px; border-radius: 999px; font-size: 13px; }
    .muted { color: var(--muted); }
    .small { font-size: 13px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .spinner { width: 16px; height: 16px; border: 2px solid #ffffff25; border-top-color: #fff; border-radius: 50%; display: inline-block; animation: spin .8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="wrap">
    
    
<header style="background: linear-gradient(90deg, #0a1a40, #3b82f6, #6d28d9); padding:20px; text-align:center; border-radius:8px 8px 0 0;">
  <h1 style="margin:0; font-size:28px; font-weight:700; color:white;">Hasnain's Student Support Platform</h1>
</header>
<nav style="background: linear-gradient(90deg, #1e3a8a, #60a5fa, #7c3aed); padding:12px; text-align:center; margin-bottom:20px; border-radius:0 0 8px 8px;">
  <a href="index.html" style="background:white; color:#1e3a8a; padding:8px 16px; border-radius:6px; text-decoration:none; font-weight:600;">← Back to Home</a>
</nav>

    <p class="small">Online API based • Grammar by LanguageTool • Synonyms by Datamuse • Tense detected locally</p>

    <div class="card">
      <label for="text" class="section-title">Your sentence</label>
      <textarea id="text" placeholder="Type or paste your sentence here… Examples: He is playing cricket. / She has been studying for two hours."></textarea>
      <div class="row">
        <button id="checkBtn">Check Grammar</button>
        <button id="clearBtn" class="ghost">Clear</button>
        <span id="loading" class="muted small" style="display:none"><span class="spinner"></span> Checking…</span>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="section-title">Result</div>
        <div id="status" class="status muted">—</div>
        <div id="tense" class="chips" style="margin-top:8px;"></div>
        <div style="height:8px"></div>
        <div class="section-title">Suggestions</div>
        <div id="suggestions" class="list muted">—</div>
      </div>

      <div class="card">
        <div class="section-title">Synonyms (top 5 for each word)</div>
        <div id="synonyms" class="syn-list muted">—</div>
      </div>
    </div>

    <div class="small muted">Contact: <a href="mailto:Hasnainaliqureshi12356@gmail.com" style="color:white; text-decoration:none;">Hasnainaliqureshi12356@gmail.com</a></div>
  </div>

  <script>
    const ltEndpoint = 'https://api.languagetool.org/v2/check'; // Public LanguageTool

    const checkBtn = document.getElementById('checkBtn');
    const clearBtn = document.getElementById('clearBtn');
    const textEl = document.getElementById('text');
    const statusEl = document.getElementById('status');
    const tenseEl = document.getElementById('tense');
    const suggEl = document.getElementById('suggestions');
    const synEl = document.getElementById('synonyms');
    const loadingEl = document.getElementById('loading');

    clearBtn.addEventListener('click', () => {
      textEl.value = '';
      statusEl.textContent = '—';
      statusEl.className = 'status muted';
      tenseEl.innerHTML = '';
      suggEl.innerHTML = '—';
      suggEl.className = 'list muted';
      synEl.innerHTML = '—';
      synEl.className = 'syn-list muted';
    });

    checkBtn.addEventListener('click', async () => {
      const text = textEl.value.trim();
      if (!text) { alert('Please enter a sentence.'); return; }

      setLoading(true);
      try {
        const [lt, tense] = await Promise.all([
          checkGrammar(text),
          Promise.resolve(detectTense(text))
        ]);
        renderGrammar(text, lt);
        renderTense(tense);
        await renderSynonyms(text);
      } catch (e) {
        console.error(e);
        statusEl.innerHTML = '❌ <span class="bad">Error</span>'; 
        suggEl.innerHTML = `<div class="issue">\n          <b>Something went wrong.</b><br><span class="muted small">${escapeHtml(e.message || e)}</span>\n        </div>`;
        suggEl.className = 'list';
      } finally {
        setLoading(false);
      }
    });

    function setLoading(on) { loadingEl.style.display = on ? 'inline-flex' : 'none'; }

    async function checkGrammar(text) {
      const params = new URLSearchParams();
      params.set('text', text);
      params.set('language', 'en-US');
      // You may also set motherTongue, preferredVariants, level, etc.

      const res = await fetch(ltEndpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: params.toString()
      });
      if (!res.ok) throw new Error('LanguageTool API error: ' + res.status);
      return res.json();
    }

    function renderGrammar(original, lt) {
      const matches = lt.matches || [];
      if (matches.length === 0) {
        statusEl.innerHTML = '✅ <span class="ok">Grammatically Correct</span>';
        statusEl.className = 'status ok';
        suggEl.innerHTML = '<span class="muted">No suggestions needed.</span>';
        suggEl.className = 'list';
        return;
      }

      statusEl.innerHTML = `❌ <span class="bad">Found ${matches.length} issue${matches.length>1?'s':''}</span>`;
      statusEl.className = 'status bad';

      const items = matches.map((m) => {
        const repl = (m.replacements || []).slice(0, 3).map(r => r.value).join(', ');
        const offset = m.offset;
        const length = m.length;
        const badFrag = original.substr(offset, length);
        return `<div class="issue">\n          <div class="small muted">Rule: ${escapeHtml(m.rule?.issueType || m.rule?.id || '—')}</div>\n          <div><b class="mono">${escapeHtml(badFrag)}</b> → ${escapeHtml(repl || '—')}</div>\n          <div class="small muted">${escapeHtml(m.message || '')}</div>\n        </div>`;
      }).join('');

      suggEl.innerHTML = items;
      suggEl.className = 'list';
    }

    function detectTense(text) {
      // Very lightweight heuristic-based tense detector for 12 tenses (English)
      // Works best on single independent clause sentences.
      const s = text.trim().replace(/\s+/g, ' ').toLowerCase();
      const tokens = s.split(/[^a-zA-Z']+/).filter(Boolean);

      const has = (w) => s.includes(' ' + w + ' ') || s.startsWith(w + ' ') || s.endsWith(' ' + w);
      const re = (r) => r.test(s);

      const ing = /\b([a-z]+)ing\b/;
      const pastPart = /\b(been|done|gone|seen|made|said|taken|known|given|found|thought|told|become|shown|left|felt|put|brought|kept|let|begun|seemed|helped|talked|turned|started|looked|played|moved|lived|believed|held|written|provided|sat|stood|lost|paid|met|included|continued|set|learned|changed|led|understood|watched|followed|stopped|created|spoke|read|spent|grew|opened|walked|won|taught|offered|remembered|considered|appeared|bought|served|died|sent|built|stayed|fell|cut|reached|killed|raised|passed|sold|decided|returned|explained)\b/;
      const pastEd = /\b[a-z]+ed\b/;

      // Perfect Continuous
      if (has('will have been') && re(ing)) return label('Future Perfect Continuous');
      if ((has('has been') || has('have been')) && re(ing)) return label('Present Perfect Continuous');
      if (has('had been') && re(ing)) return label('Past Perfect Continuous');

      // Perfect
      if (has('will have') && (re(pastPart) || re(pastEd))) return label('Future Perfect');
      if ((has('has') || has('have')) && (re(pastPart) || re(pastEd))) return label('Present Perfect');
      if (has('had') && (re(pastPart) || re(pastEd))) return label('Past Perfect');

      // Continuous
      if (has('will be') && re(ing)) return label('Future Continuous');
      if ((has('am') || has('is') || has('are')) && re(ing)) return label('Present Continuous');
      if ((has('was') || has('were')) && re(ing)) return label('Past Continuous');

      // Simple Future
      if (has('will')) return label('Future Simple');

      // Simple Past vs Present
      if (re(pastEd) || /\b(went|saw|made|said|took|knew|gave|found|thought|told|became|showed|left|felt|put|brought|kept|let|began|seemed|helped|talked|turned|started|looked|played|moved|lived|believed|held|wrote|provided|sat|stood|lost|paid|met|included|continued|set|learned|changed|led|understood|watched|followed|stopped|created|spoke|read|spent|grew|opened|walked|won|taught|offered|remembered|considered|appeared|bought|served|died|sent|built|stayed|fell|cut|reached|killed|raised|passed|sold|decided|returned|explained)\b/.test(s)) return label('Past Simple');

      // Heuristics for Present Simple (3rd person -s, do/does, general truths)
      if (/\b(do|does|do not|does not|doesn't|don't)\b/.test(s)) return label('Present Simple');
      if (/\b([a-z]+)s\b/.test(s)) return label('Present Simple');

      // Fallback
      return label('Unknown / Mixed');

      function label(name) {
        return { name, hints: tokens.slice(0, 8).join(' ') };
      }
    }

    function renderTense(t) {
      tenseEl.innerHTML = '';
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.textContent = 'Tense: ' + t.name;
      tenseEl.appendChild(chip);
    }

    async function renderSynonyms(text) {
      const words = Array.from(new Set(
        text
          .toLowerCase()
          .replace(/[^a-z\s']/g, ' ')
          .split(/\s+/)
          .filter(w => w && w.length > 1)
      ));

      synEl.className = 'syn-list';
      if (words.length === 0) { synEl.innerHTML = '<span class="muted">—</span>'; return; }

      const capped = words.slice(0, 50); // cap to avoid throttling; adjust if needed
      synEl.innerHTML = '<span class="muted small">Fetching synonyms for ' + capped.length + ' word(s)…</span>';

      const results = await Promise.all(capped.map(fetchSynonyms));

      const listHtml = results.map(({ word, syns }) => {
        const top = syns.slice(0, 5);
        const chips = top.length
          ? top.map(s => `<span class="chip">${escapeHtml(s)}</span>`).join(' ')
          : '<span class="muted small">No common synonyms found.</span>';
        return `<div><b>${escapeHtml(word)}</b><div class="chips" style="margin-top:6px;">${chips}</div></div>`;
      }).join('');

      synEl.innerHTML = listHtml;
    }

    async function fetchSynonyms(word) {
      const url = `https://api.datamuse.com/words?ml=${encodeURIComponent(word)}`;
      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error('Datamuse API error: ' + res.status);
        const data = await res.json();
        const syns = (data || []).map(x => x.word).filter(Boolean);
        return { word, syns };
      } catch (e) {
        return { word, syns: [] };
      }
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[s]));
    }
  </script>

  <footer style="margin-top:40px; background:black; padding:16px; text-align:center; color:white; font-size:14px; font-weight:600;">
    © 2025 Hasnain Ali Qureshi — All Rights Reserved
  </footer>
</body>
</html>

